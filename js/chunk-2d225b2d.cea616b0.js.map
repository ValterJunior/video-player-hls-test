{"version":3,"sources":["webpack:///./node_modules/@lxsmnsyc/indigo-player/dist/esm/HlsMedia-3ae76445.js"],"names":["formatTrack","track","id","width","height","bandwidth","bitrate","HlsMedia","_Media","_this","apply","this","arguments","name","_proto","prototype","load","_this2","player","autoStartLoad","mod","instance","getModule","mediaElement","attachMedia","on","Events","MANIFEST_PARSED","_","data","tracks","levels","map","sort","a","b","emit","MEDIA_STATE_TRACKS","LEVEL_SWITCHED","level","MEDIA_STATE_TRACKCHANGE","auto","autoLevelEnabled","ERROR","fatal","type","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","setError","HLSJS_CRITICAL_ERROR","format","loadSource","src","seekTo","time","Infinity","call","liveSyncPosition","unload","destroy","selectTrack","currentLevel","selectAudioLanguage"],"mappings":"gHAAA,8FASA,SAASA,EAAYC,EAAOC,GAC1B,MAAO,CACLA,GAAIA,EACJC,MAAOF,EAAME,MACbC,OAAQH,EAAMG,OACdC,UAAWJ,EAAMK,SAIrB,IAAIC,EAAwB,SAAUC,GAGpC,SAASD,IACP,IAAIE,EAIJ,OAFAA,EAAQD,EAAOE,MAAMC,KAAMC,YAAcD,KACzCF,EAAMI,KAAO,WACNJ,EAPT,eAAeF,EAAUC,GAUzB,IAAIM,EAASP,EAASQ,UA0FtB,OAxFAD,EAAOE,KAAO,WACZ,IAAIC,EAASN,KAETO,EAAS,IAAI,IAAM,CACrBC,eAAe,IAEbC,EAAMT,KAAKU,SAASC,UAAU,eAElC,GAAIF,EAAK,CACP,IAAIG,EAAeH,EAAIG,aAEnBA,GACFL,EAAOM,YAAYD,GAIvBL,EAAOO,GAAG,IAAMC,OAAOC,iBAAiB,SAAUC,EAAGC,GACnD,IAAIC,EAASD,EAAKE,OAAOC,IAAIhC,GAAaiC,MAAK,SAAUC,EAAGC,GAC1D,OAAOA,EAAE9B,UAAY6B,EAAE7B,aAGzBY,EAAOmB,KAAK,OAAOC,mBAAoB,CACrCP,OAAQA,OAGZZ,EAAOO,GAAG,IAAMC,OAAOY,gBAAgB,SAAUV,EAAGC,GAClD,IAAIE,EAASb,EAAOa,OAChBQ,EAAQV,EAAKU,MAEjBtB,EAAOmB,KAAK,OAAOI,wBAAyB,CAC1CvC,MAAOD,EAAY+B,EAAOQ,GAAQA,GAClCE,KAAMvB,EAAOwB,sBAGjBxB,EAAOO,GAAG,IAAMC,OAAOiB,OAAO,SAAUf,EAAGC,GACpCA,EAAKe,QAINf,EAAKgB,OAAS,IAAMC,WAAWC,cACjC7B,EAAO8B,YACEnB,EAAKgB,OAAS,IAAMC,WAAWG,YACxC/B,EAAOgC,oBAEPjC,EAAOI,SAAS8B,SAAS,IAAI,QAAY,QAAWC,qBAAsBvB,QAI1ElB,KAAKU,UAAYV,KAAKU,SAASgC,QACjCnC,EAAOoC,WAAW3C,KAAKU,SAASgC,OAAOE,KAGzCrC,EAAO8B,YACPrC,KAAKO,OAASA,GAGhBJ,EAAO0C,OAAS,SAAgBC,GAC1BA,IAASC,IAQblD,EAAOO,UAAUyC,OAAOG,KAAKhD,KAAM8C,GAP7B9C,KAAKU,UAAYV,KAAKU,SAASH,QAAUP,KAAKO,QAChDP,KAAKU,SAASH,OAAOsC,OAAO7C,KAAKO,OAAO0C,mBAS9C9C,EAAO+C,OAAS,WACVlD,KAAKO,QACPP,KAAKO,OAAO4C,WAIhBhD,EAAOiD,YAAc,SAAqB9D,GACpCU,KAAKO,SAELP,KAAKO,OAAO8C,aADA,SAAV/D,GAC0B,EAEDA,EAAMC,KAMvCY,EAAOmD,oBAAsB,aAGtB1D,EArGmB,CAsG1B,QAEa","file":"js/chunk-2d225b2d.cea616b0.js","sourcesContent":["import { _ as _inheritsLoose, E as Events, g as PlayerError, d as ErrorCodes, a as Media } from './index-62b58b88.js';\nimport HlsJs from 'hls.js';\nimport '@emotion/css';\nimport 'resize-observer';\nimport 'screenfull';\nimport 'subtitle';\nimport 'immer';\nimport 'deepmerge';\n\nfunction formatTrack(track, id) {\n  return {\n    id: id,\n    width: track.width,\n    height: track.height,\n    bandwidth: track.bitrate\n  };\n}\n\nvar HlsMedia = /*#__PURE__*/function (_Media) {\n  _inheritsLoose(HlsMedia, _Media);\n\n  function HlsMedia() {\n    var _this;\n\n    _this = _Media.apply(this, arguments) || this;\n    _this.name = 'HlsMedia';\n    return _this;\n  }\n\n  var _proto = HlsMedia.prototype;\n\n  _proto.load = function load() {\n    var _this2 = this;\n\n    var player = new HlsJs({\n      autoStartLoad: false\n    });\n    var mod = this.instance.getModule('HTML5Player');\n\n    if (mod) {\n      var mediaElement = mod.mediaElement;\n\n      if (mediaElement) {\n        player.attachMedia(mediaElement);\n      }\n    }\n\n    player.on(HlsJs.Events.MANIFEST_PARSED, function (_, data) {\n      var tracks = data.levels.map(formatTrack).sort(function (a, b) {\n        return b.bandwidth - a.bandwidth;\n      });\n\n      _this2.emit(Events.MEDIA_STATE_TRACKS, {\n        tracks: tracks\n      });\n    });\n    player.on(HlsJs.Events.LEVEL_SWITCHED, function (_, data) {\n      var levels = player.levels;\n      var level = data.level;\n\n      _this2.emit(Events.MEDIA_STATE_TRACKCHANGE, {\n        track: formatTrack(levels[level], level),\n        auto: player.autoLevelEnabled\n      });\n    });\n    player.on(HlsJs.Events.ERROR, function (_, data) {\n      if (!data.fatal) {\n        return;\n      }\n\n      if (data.type === HlsJs.ErrorTypes.NETWORK_ERROR) {\n        player.startLoad();\n      } else if (data.type === HlsJs.ErrorTypes.MEDIA_ERROR) {\n        player.recoverMediaError();\n      } else {\n        _this2.instance.setError(new PlayerError(ErrorCodes.HLSJS_CRITICAL_ERROR, data));\n      }\n    });\n\n    if (this.instance && this.instance.format) {\n      player.loadSource(this.instance.format.src);\n    }\n\n    player.startLoad();\n    this.player = player;\n  };\n\n  _proto.seekTo = function seekTo(time) {\n    if (time === Infinity) {\n      if (this.instance && this.instance.player && this.player) {\n        this.instance.player.seekTo(this.player.liveSyncPosition);\n      }\n\n      return;\n    }\n\n    _Media.prototype.seekTo.call(this, time);\n  };\n\n  _proto.unload = function unload() {\n    if (this.player) {\n      this.player.destroy();\n    }\n  };\n\n  _proto.selectTrack = function selectTrack(track) {\n    if (this.player) {\n      if (track === 'auto') {\n        this.player.currentLevel = -1;\n      } else {\n        this.player.currentLevel = track.id;\n      }\n    }\n  } // eslint-disable-next-line class-methods-use-this\n  ;\n\n  _proto.selectAudioLanguage = function selectAudioLanguage() {// no feature\n  };\n\n  return HlsMedia;\n}(Media);\n\nexport default HlsMedia;\n//# sourceMappingURL=HlsMedia-3ae76445.js.map\n"],"sourceRoot":""}